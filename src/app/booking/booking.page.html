<ion-content class="sidebar-mini">
  <!-- Preloader -->

  <!-- Preloader -->

  <!-- ======================================
  ******* Main Page Wrapper **********
  ======================================= -->

  <div class="main-container-wrapper">
    <app-header></app-header>

    <div class="container-fluid page-body-wrapper">
      <!-- Side Menu area -->


      <!-- partial -->
      <div class="main-panel" id="main-panel">
        <div class="content-wrapper">
          <div class="container-fluid">
            <div class="row">
              <div class="col-xl-12 box-margin height-card">
                <div class="card">
                  <div class="card-body">
                    <ng-container *ngFor="let status of bookingStatuses">
                      <ion-button mode="ios" [fill]="totalBookingForm.statusText==status.name?'solid':'outline'"
                        class="status-btn" (click)="updateBookingStatus(status.name)"
                        *ngIf="status.modes.includes(totalBookingForm.shipmentmodeId)">{{status.name}}
                      </ion-button>
                    </ng-container>

                  </div>
                </div>
              </div>
              <div class="col-xl-12 box-margin height-card">

                <div class="card">
                  <div class="card-body">
                    <h3>Booking Details</h3>
                    <div class="form-row">
                      <div class="form-group col-md-3">
                        <label for="containerCount" class="col-form-label">Booking ID</label>
                        <input type="text" class="form-control" id="containerCount" readonly
                          placeholder="Auto generated" [(ngModel)]="totalBookingForm.uniqueId">
                      </div>
                      <div class="form-group col-md-3">
                        <label for="containerCount" class="col-form-label">Quote number</label>
                        <input type="number" min="0" class="form-control" id="containerCount"
                          [(ngModel)]="cargoExtrainfo.quoteNumber">
                      </div>
                      <div class="form-group col-md-3">
                        <label for="containerTYpe" class="col-form-label">Shipment Mode</label>
                        <select id="containerType" class="form-control" [(ngModel)]="totalBookingForm.shipmentmodeId"
                          (change)="addCargoDetails()">
                          <option *ngFor="let data of shipmentModes" [ngValue]="data.id">{{data.name}}</option>
                        </select>
                      </div>

                      <div class="form-group col-md-3">
                        <label for="weightunit" class="col-form-label">Inco Terms</label>
                        <select id="weightunit" class="form-control" [(ngModel)]="totalBookingForm.incotermId">
                          <option *ngFor="let data of incoTerms" [ngValue]="data.id"> {{data.code}} - {{data.name}}
                          </option>
                        </select>
                      </div>

                    </div>
                    <div class="form-row">
                      <div class="form-group col-md-3">
                        <label class="col-form-label">Customer Reference</label>
                        <ngx-select [items]="addressBook" optionTextField="companyName" optionValueField="id"
                          [(ngModel)]="totalBookingForm.customerId" (select)="setCustomerEmail($event)"></ngx-select>
                        <ion-button class="ion-float-end" fill="clear" mode="ios" size="small" expand="block"
                          (click)="openNewContact()"
                          *ngIf="getRolePermissions('addressbook',1)"
                          >
                          <ion-icon name="add-circle-outline" slot="start"></ion-icon> &nbsp; Add Customer
                        </ion-button>

                      </div>
                      <div class="form-group col-md-3">
                        <label for="cargoDesc" class="col-form-label">Shipper</label>
                        <ngx-select [items]="addressBook" optionTextField="companyName" optionValueField="id"
                          [(ngModel)]="totalBookingForm.shipperId"></ngx-select>
                        <ion-button class="ion-float-end" fill="clear" mode="ios" size="small" expand="block"
                          (click)="openNewContact()"
                          *ngIf="getRolePermissions('addressbook',1)"
                          >
                          <ion-icon name="add-circle-outline" slot="start"></ion-icon> &nbsp; Add Shipper
                        </ion-button>
                        <!--           <select class="form-control" [(ngModel)]="totalBookingForm.shipperId">
                          <option *ngFor="let data of addressBook" [ngValue]="data.id">{{data.companyName}}</option>
                        
                        </select> -->
                      </div>
                      <div class="form-group col-md-3">
                        <label for="cargoDesc" class="col-form-label">Consignee</label>
                        <ngx-select [items]="addressBook" optionTextField="companyName" optionValueField="id"
                          [(ngModel)]="totalBookingForm.consigneeId"></ngx-select>
                        <ion-button class="ion-float-end" fill="clear" mode="ios" size="small" expand="block"
                          (click)="openNewContact()"
                          *ngIf="getRolePermissions('addressbook',1)"
                          >
                          <ion-icon name="add-circle-outline" slot="start"></ion-icon> &nbsp; Add Consignee
                        </ion-button>
                        <!--                        <select class="form-control" [(ngModel)]="totalBookingForm.consigneeId">
                          <option *ngFor="let data of addressBook" [ngValue]="data.id">{{data.companyName}}</option>
                        </select> -->
                      </div>

                      <div class="form-group col-md-3">
                        <label for="salesExecutive" class="col-form-label">Sales Executive</label>
                        <ngx-select [items]="saleExecutives" optionTextField="fullName" optionValueField="id"
                          [(ngModel)]="totalBookingForm.salesexecutiveId"></ngx-select>

                        <!--    <select class="form-control" [(ngModel)]="totalBookingForm.salesexecutiveId">
                          <option *ngFor="let data of saleExecutives" [ngValue]="data.id">{{data.firstName}}
                            {{data.lastName}}</option>
                        </select> -->
                      </div>
                    </div>
                    <div class="form-row">
                      <div class="form-group col-md-4">
                        <label for="weight" class="col-form-label">Customer PO</label>
                        <input type="text" class="form-control" [(ngModel)]="totalBookingForm.customerPo" />
                      </div>
                      <div class="form-group col-md-4">
                        <label for="weight" class="col-form-label">Carrier</label>

                        <ngx-select [items]="airlines" optionTextField="name" optionValueField="name"
                          [(ngModel)]="totalBookingForm.carrier" *ngIf="totalBookingForm.shipmentmodeId==1">
                        </ngx-select>
                        <ngx-select [items]="shippinglines" optionTextField="name" optionValueField="name"
                          [(ngModel)]="totalBookingForm.carrier" *ngIf="totalBookingForm.shipmentmodeId!=1">
                        </ngx-select>
                      </div>

                      <div class="form-group col-md-4">
                        <label for="weight" class="col-form-label">Agent</label>
                        <ngx-select [items]="addressBook" optionTextField="companyName" optionValueField="id"
                          [(ngModel)]="totalBookingForm.agentId"></ngx-select>
                        <ion-button class="ion-float-end" fill="clear" mode="ios" size="small" expand="block"
                          (click)="openNewContact()"
                          *ngIf="getRolePermissions('addressbook',1)"
                          >
                          <ion-icon name="add-circle-outline" slot="start"></ion-icon> &nbsp; Add Agent
                        </ion-button>

                      </div>
                    </div>



                  </div> <!-- end card-body -->
                </div> <!-- end card-->
              </div> <!-- end col -->
              <div class="col-xl-12 box-margin height-card">
                <div class="card">
                  <div class="card-body">
                    <h3>Cargo Details</h3>
                    <ng-container *ngIf="totalBookingForm.shipmentmodeId==1">
                      <div class="airForm-wrapper ion-padding-vertical" *ngFor="let data of cargoLoads; let i = index">
                        <div class="form-row">
                          <div class="form-group col-md-2">
                            <label for="cargoDesc" class="col-form-label">Cargo Description</label>
                            <input type="text" class="form-control" id="cargoDesc" placeholder="Cargo Description"
                              [(ngModel)]="data.cargoDescription">
                          </div>
                          <div class="form-group col-md-2">
                            <label for="containerTYpe" class="col-form-label">Package Type</label>
                            <ngx-select [items]="packageTypes" optionTextField="name" optionValueField="id"
                              [(ngModel)]="data.packagetypeId"></ngx-select>
                          </div>


                          <div class="form-group col-md-1">
                            <label for="containerCount" class="col-form-label">Quantity</label>
                            <input type="number" min="0" class="form-control" id="containerCount" min="1"
                              [(ngModel)]="data.quantity" (change)="calculateChargeableWeight(data)">
                          </div>

                          <div class="form-group col-md-1">
                            <label for="weightunit" class="col-form-label">Unit</label>
                            <select id="weightunit" class="form-control" [(ngModel)]="data.weightUnit">
                              <option [ngValue]="1">KG</option>
                              <option [ngValue]="2">LBs</option>
                            </select>
                          </div>
                          <div class="form-group col-md-2">
                            <label for="weight" class="col-form-label">Per Unit Weight</label>
                            <input type="number" min="0" class="form-control" [(ngModel)]="data.perPackageWeight"
                              (change)="calculateChargeableWeight(data)" />
                          </div>
                          <div class="form-group col-md-1">
                            <label for="weight" class="col-form-label">Total Weight</label>
                            <input type="number" min="0" class="form-control" [(ngModel)]="data.totalWeight"
                              [value]="data.quantity*data.perPackageWeight" (change)="calculateChargeableWeight(data)"
                              readonly />
                          </div>

                          <div class="form-group col-md-1">
                            <label for="weight" class="col-form-label">L</label>
                            <input type="number" min="0" class="form-control" [(ngModel)]="data.length"
                              (change)="onLengthUnitChange(data)" />
                          </div>
                          <div class="form-group col-md-1">
                            <label for="weight" class="col-form-label">W</label>
                            <input type="number" min="0" class="form-control" [(ngModel)]="data.width"
                              (change)="onLengthUnitChange(data)" />
                          </div>

                          <div class="form-group col-md-1">
                            <label for="weight" class="col-form-label">H</label>
                            <input type="number" min="0" class="form-control" [(ngModel)]="data.height"
                              (change)="onLengthUnitChange(data)" />
                          </div>
                          <div class="form-group col-md-1">
                            <label for="weight" class="col-form-label">Unit</label>
                            <select class="form-control" [(ngModel)]="data.lengthUnit"
                              (change)="onLengthUnitChange(data)">
                              <option [ngValue]="1">CM</option>
                              <option [ngValue]="2">IN</option>


                            </select>
                          </div>
                          <div class="form-group col-md-1">
                            <label for="weight" class="col-form-label">CBM</label>
                            <input type="number" min="0" class="form-control" [(ngModel)]="data.cbm" readonly />
                          </div>
                          <div class="form-group col-md-2">
                            <label for="weight" class="col-form-label">Total CBM</label>
                            <input type="number" min="0" class="form-control" [(ngModel)]="data.totalCbm" readonly />
                          </div>
                          <div class="form-group col-md-2">
                            <label for="weight" class="col-form-label">Chargeable Weight</label>
                            <input type="number" min="0" class="form-control" [(ngModel)]="data.chargeableWeight"
                              (change)="calculateChargeableWeight(data)" readonly />
                          </div>
                          <div class="form-group col-md-2" style="padding-top: 35px;">

                            <ion-button color="danger" (click)="removeCargoDetails(i)">
                              <ion-icon name="close" slot="start"></ion-icon> Remove field
                            </ion-button>
                          </div>
                        </div>

                      </div>
                    </ng-container>
                    <ng-container *ngIf="totalBookingForm.shipmentmodeId==3">
                      <div class="fclForm-wrapper  ion-padding-vertical" *ngFor="let data of cargoLoads;let i = index">

                        <div class="form-row">
                          <div class="form-group col-md-2">
                            <label for="cargoDesc" class="col-form-label">Cargo Description</label>
                            <input type="text" class="form-control" id="cargoDesc" placeholder="Cargo Description"
                              [(ngModel)]="data.cargoDescription">
                          </div>
                          <div class="form-group col-md-2">
                            <label for="containerTYpe" class="col-form-label">Container Type</label>
                            <select id="containerType" class="form-control" [(ngModel)]="data.containertypeId">
                              <option *ngFor="let data of containerTypes" [ngValue]="data.id">{{data.name}}</option>
                            </select>
                          </div>


                          <div class="form-group col-md-2">
                            <label for="containerCount" class="col-form-label">Container Count</label>
                            <input type="number" min="0" class="form-control" id="containerCount" min="1"
                              [(ngModel)]="data.containerCount">
                          </div>

                          <div class="form-group col-md-2">
                            <label for="weightunit" class="col-form-label">Weight unit</label>
                            <select id="weightunit" class="form-control" [(ngModel)]="data.weightUnit">
                              <option [ngValue]="1">KG</option>
                              <option [ngValue]="2">Gram</option>
                              <option [ngValue]="3">Pound</option>
                            </select>
                          </div>

                          <div class="form-group col-md-2">
                            <label for="weight" class="col-form-label">Weight</label>
                            <input type="number" min="0" class="form-control" [(ngModel)]="data.weight" />
                          </div>
                          <div class="form-group col-md-2">
                            <label for="weight" class="col-form-label">Container number</label>
                            <input type="text" min="0" class="form-control" [(ngModel)]="data.containerNumber"  />
                          </div>
                          <div class="form-group col-md-2" style="padding-top: 35px;">

                            <ion-button color="danger" (click)="removeCargoDetails(i)">
                              <ion-icon name="close" slot="start"></ion-icon> Remove field
                            </ion-button>
                          </div>
                        </div>


                      </div>
                    </ng-container>
                    <ng-container *ngIf="totalBookingForm.shipmentmodeId==2">
                      <div class="lclForm-wrapper  ion-padding-vertical" *ngFor="let data of cargoLoads;let i = index">

                        <div class="form-row">
                          <div class="form-group col-md-2">
                            <label for="cargoDesc" class="col-form-label">Cargo Description</label>
                            <input type="text" class="form-control" id="cargoDesc" placeholder="Cargo Description"
                              [(ngModel)]="data.cargoDescription">
                          </div>
                          <div class="form-group col-md-2">
                            <label for="containerTYpe" class="col-form-label">Package Type</label>
                            <ngx-select [items]="packageTypes" optionTextField="name" optionValueField="id"
                              [(ngModel)]="data.packagetypeId"></ngx-select>
                          </div>



                          <div class="form-group col-md-1">
                            <label for="weightunit" class="col-form-label">Unit</label>
                            <select id="weightunit" class="form-control" [(ngModel)]="data.weightUnit">
                              <option [ngValue]="1">KG</option>
                              <option [ngValue]="2">Gram</option>
                              <option [ngValue]="3">Pound</option>
                            </select>
                          </div>
                          <div class="form-group col-md-2">
                            <label for="weight" class="col-form-label">Per unit Weight</label>
                            <input type="number" min="0" class="form-control" [(ngModel)]="data.weight" />
                          </div>

                          <div class="form-group col-md-1">
                            <label for="containerCount" class="col-form-label">Quantity</label>
                            <input type="number" min="0" class="form-control" id="containerCount" min="1"
                              [(ngModel)]="data.quantity">
                          </div>

                          <div class="form-group col-md-1">
                            <label for="weight" class="col-form-label">Total Weight</label>
                            <input type="number" min="0" class="form-control" [(ngModel)]="data.totalWeight"
                              [value]="data.quantity*data.weight" readonly />
                          </div>




                          <div class="form-group col-md-1">
                            <label for="weight" class="col-form-label">H</label>
                            <input type="number" min="0" class="form-control" [(ngModel)]="data.height"
                              (change)="onLengthUnitChange(data)" />
                          </div>
                          <div class="form-group col-md-1">
                            <label for="weight" class="col-form-label">W</label>
                            <input type="number" min="0" class="form-control" [(ngModel)]="data.width"
                              (change)="onLengthUnitChange(data)" />
                          </div>
                          <div class="form-group col-md-1">
                            <label for="weight" class="col-form-label">L</label>
                            <input type="number" min="0" class="form-control" [(ngModel)]="data.length"
                              (change)="onLengthUnitChange(data)" />
                          </div>

                          <div class="form-group col-md-1">
                            <label for="weight" class="col-form-label">Unit</label>
                            <select class="form-control" [(ngModel)]="data.lengthUnit">
                              <option [ngValue]="1">CM</option>
                              <option [ngValue]="2">IN</option>


                            </select>
                          </div>
                          <div class="form-group col-md-1">
                            <label for="weight" class="col-form-label">CBM</label>
                            <input type="number" min="0" class="form-control" [(ngModel)]="data.cbm" readonly />
                          </div>
                          <div class="form-group col-md-2">
                            <label for="weight" class="col-form-label">Total CBM</label>
                            <input type="number" min="0" class="form-control" [(ngModel)]="data.totalCbm" readonly />
                          </div>
   <!--                        <div class="form-group col-md-2">
                            <label for="weight" class="col-form-label">Container number</label>
                            <input type="text" min="0" class="form-control" [(ngModel)]="data.containerNumber"  />
                          </div> -->
                          <div class="form-group col-md-2" style="padding-top: 35px;">

                            <ion-button color="danger" (click)="removeCargoDetails(i)">
                              <ion-icon name="close" slot="start"></ion-icon> Remove field
                            </ion-button>
                          </div>
                        </div>
                      </div>
                    </ng-container>

                    <ng-container *ngIf="totalBookingForm.shipmentmodeId==4">
                      <div class="lclForm-wrapper  ion-padding-vertical" *ngFor="let data of cargoLoads;let i = index">

                        <div class="form-row">
                          <div class="form-group col-md-2">
                            <label for="cargoDesc" class="col-form-label">Cargo Description</label>
                            <input type="text" class="form-control" id="cargoDesc" placeholder="Cargo Description"
                              [(ngModel)]="data.cargoDescription">
                          </div>



                          <div class="form-group col-md-1">
                            <label for="containerCount" class="col-form-label">Quantity</label>
                            <input type="number" min="0" class="form-control" id="containerCount" min="1"
                              [(ngModel)]="data.quantity">
                          </div>

                          <div class="form-group col-md-1">
                            <label for="weightunit" class="col-form-label">Unit</label>
                            <select id="weightunit" class="form-control" [(ngModel)]="data.weightUnit">
                              <option [ngValue]="1" selected>KG</option>

                            </select>
                          </div>




                          <div class="form-group col-md-1">
                            <label for="weight" class="col-form-label">Weight</label>
                            <input type="number" min="0" class="form-control" [(ngModel)]="data.weight" />
                          </div>

                          <div class="form-group col-md-1">
                            <label for="weight" class="col-form-label">L</label>
                            <input type="number" min="0" class="form-control" [(ngModel)]="data.length"
                              (change)="onLengthUnitChange(data)" />
                          </div>
                          <div class="form-group col-md-1">
                            <label for="weight" class="col-form-label">W</label>
                            <input type="number" min="0" class="form-control" [(ngModel)]="data.width"
                              (change)="onLengthUnitChange(data)" />
                          </div>

                          <div class="form-group col-md-1">
                            <label for="weight" class="col-form-label">H</label>
                            <input type="number" min="0" class="form-control" [(ngModel)]="data.height"
                              (change)="onLengthUnitChange(data)" />
                          </div>
                          <div class="form-group col-md-1">
                            <label for="weight" class="col-form-label">Unit</label>
                            <select class="form-control" [(ngModel)]="data.lengthUnit">
                              <option [ngValue]="1">CM</option>
                              <option [ngValue]="2">IN</option>


                            </select>
                          </div>
                          <div class="form-group col-md-1">
                            <label for="weight" class="col-form-label">CBM</label>
                            <input type="number" min="0" class="form-control" [(ngModel)]="data.cbm" />
                          </div>

                          <div class="form-group col-md-2" style="padding-top: 35px;">

                            <ion-button color="danger" (click)="removeCargoDetails(i)">
                              <ion-icon name="close" slot="start"></ion-icon> Remove field
                            </ion-button>
                          </div>
                        </div>
                      </div>
                    </ng-container>

                    <ng-container *ngIf="totalBookingForm.shipmentmodeId==5">
                      <div class="lclForm-wrapper  ion-padding-vertical" *ngFor="let data of cargoLoads;let i = index">

                        <div class="form-row">
                          <div class="form-group col-md-2">
                            <label for="cargoDesc" class="col-form-label">Cargo Description</label>
                            <input type="text" class="form-control" id="cargoDesc" placeholder="Cargo Description"
                              [(ngModel)]="data.cargoDescription">
                          </div>

                          <div class="form-group col-md-2">
                            <label for="weightunit" class="col-form-label">Cargo Type</label>
                            <select id="weightunit" class="form-control" [(ngModel)]="data.cargoType">
                              <option [ngValue]="1">Break Bulk</option>
                              <option [ngValue]="2">Bulk Cargo</option>
                              <option [ngValue]="3">Liquid Cargo</option>
                              <option [ngValue]="4">Wheeled Cargo</option>

                            </select>
                          </div>

                          <div class="form-group col-md-2">
                            <label for="containerCount" class="col-form-label">Units</label>
                            <input type="number" min="0" class="form-control" id="containerCount" min="1"
                              [(ngModel)]="data.quantity">
                          </div>

                          <div class="form-group col-md-2">
                            <label for="weightunit" class="col-form-label">Unit</label>
                            <select id="weightunit" class="form-control" [(ngModel)]="data.weightUnit">
                              <option [ngValue]="1" selected>KG</option>

                            </select>
                          </div>
                          <div class="form-group col-md-2">
                            <label for="weight" class="col-form-label">Weight</label>
                            <input type="number" min="0" class="form-control" [(ngModel)]="data.weight" />
                          </div>

                          <div class="form-group col-md-3">
                            <label class="col-form-label">Additional Information</label>
                            <textarea class="form-control" [(ngModel)]="data.additionalInformation"></textarea>
                          </div>







                        </div>
                      </div>
                    </ng-container>
                    <ion-button fill="outline" mode="ios" (click)="addCargoDetails(true)">
                      <ion-icon name="add" slot="start"></ion-icon> Add more loads
                    </ion-button>
                    <!--         <div class="form-row">
                        <div class="form-group col-md-2">
                          <label for="cargoDesc" class="col-form-label">ETA</label>
                          <input type="date" class="form-control" id="cargoDesc" placeholder="Cargo Description">
                        </div>

                        <div class="form-group col-md-2">
                          <label for="containerCount" class="col-form-label">ETD</label>
                          <input type="date" class="form-control" id="containerCount">
                        </div>

                        <div class="form-group col-md-2">
                          <label for="containerCount" class="col-form-label">Vessel</label>
                          <input type="text" class="form-control" id="containerCount">
                        </div>

                        <div class="form-group col-md-2">
                          <label for="containerCount" class="col-form-label">Voyage</label>
                          <input type="text" class="form-control" id="containerCount">
                        </div>


                        <div class="form-group col-md-2">
                          <label for="containerCount" class="col-form-label">AWB No.</label>
                          <input type="number" min="0" class="form-control" id="containerCount">
                        </div>

                        <div class="form-group col-md-2">
                          <label for="containerCount" class="col-form-label">Quote No.</label>
                          <input type="number" min="0" class="form-control" id="containerCount">
                        </div>

                      </div> -->

                  </div> <!-- end card-body -->
                </div> <!-- end card-->
              </div> <!-- end col -->
              <div class="col-xl-12 box-margin height-card">
                <div class="card">
                  <div class="card-body">
                    <div class="form-row">
                      <div class="form-group col-md-2">
                        <label for="cargoDesc" class="col-form-label">ETA</label>
                        <input type="date" class="form-control" id="cargoDesc" placeholder="Cargo Description"
                          [(ngModel)]="cargoExtrainfo.eta">
                      </div>

                      <div class="form-group col-md-2">
                        <label for="containerCount" class="col-form-label">ETD</label>
                        <input type="date" class="form-control" id="containerCount" [(ngModel)]="cargoExtrainfo.etd">
                      </div>

                      <div class="form-group col-md-2" *ngIf="totalBookingForm.shipmentmodeId==3 
                      || totalBookingForm.shipmentmodeId==4 
                      || totalBookingForm.shipmentmodeId==5">
                        <label for="containerCount" class="col-form-label">Vessel</label>
                        <input type="text" class="form-control" id="containerCount" [(ngModel)]="cargoExtrainfo.vessel">
                      </div>

                      <div class="form-group col-md-2" *ngIf="totalBookingForm.shipmentmodeId==3 
                      || totalBookingForm.shipmentmodeId==4 
                      || totalBookingForm.shipmentmodeId==5
                      ">
                        <label for="containerCount" class="col-form-label">Voyage</label>
                        <input type="text" class="form-control" id="containerCount" [(ngModel)]="cargoExtrainfo.voyage">
                      </div>


                      <div class="form-group col-md-2" *ngIf="totalBookingForm.shipmentmodeId==1">
                        <label for="containerCount" class="col-form-label">AWB No.</label>
                        <input type="text" min="0" class="form-control" id="containerCount"
                          [(ngModel)]="cargoExtrainfo.awbNumber">
                      </div>

                      <div class="form-group col-md-2">
                        <label for="containerCount" class="col-form-label">Job number</label>
                        <input type="text"  class="form-control" id="containerCount"
                          [(ngModel)]="cargoExtrainfo.freightJobNumber">
                      </div>

<!--                       <div class="form-group col-md-2" *ngIf="
                      totalBookingForm.shipmentmodeId==3 ||
                      totalBookingForm.shipmentmodeId==2
                      ">
                        <label for="containerCount" class="col-form-label">Container number</label>
                        <input type="number" min="0" class="form-control" id="containerCount"
                          [(ngModel)]="cargoExtrainfo.containerNumber">
                      </div> -->

                      <div class="form-group col-md-2" *ngIf="
                      totalBookingForm.shipmentmodeId==3 ||
                      totalBookingForm.shipmentmodeId==2 ||
                      totalBookingForm.shipmentmodeId==4 ||
                      totalBookingForm.shipmentmodeId==5
                      ">
                        <label for="containerCount" class="col-form-label">MBL number</label>
                        <input type="text"  class="form-control" id="containerCount"
                          [(ngModel)]="cargoExtrainfo.mblNumber">
                      </div>
                      <div class="form-group col-md-2" *ngIf="totalBookingForm.shipmentmodeId==2">
                        <label for="containerCount" class="col-form-label">HBL number</label>
                        <input type="text" min="0" class="form-control" id="containerCount"
                          [(ngModel)]="cargoExtrainfo.hblNumber">
                      </div>
                      <div class="form-group col-md-2" *ngIf="
                      totalBookingForm.shipmentmodeId==2">
                        <label for="containerCount" class="col-form-label">Co-loader</label>
                        <input type="text" class="form-control" id="containerCount"
                          [(ngModel)]="cargoExtrainfo.coLoader">
                      </div>
                      <div class="form-group col-md-2" *ngIf="totalBookingForm.shipmentmodeId==1">
                        <label for="containerCount" class="col-form-label">Flight number</label>
                        <input type="text" min="0" class="form-control" id="containerCount"
                          [(ngModel)]="cargoExtrainfo.flightNumber">
                      </div>
                      <div class="form-group col-md-2" *ngIf="
                      totalBookingForm.shipmentmodeId==3 ||
                      totalBookingForm.shipmentmodeId==2 
                      || totalBookingForm.shipmentmodeId==1
                   
                      " style="padding-top:40px !important">
                        <div class="checkbox d-inline">
                          <input type="checkbox" name="checkbox-1" id="checkbox-12"
                            [(ngModel)]="cargoExtrainfo.freehand">
                          <label for="checkbox-12" class="cr">Freehand</label>
                        </div>

                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="col-xl-6 box-margin height-card">
                <div class="card">
                  <div class="card-body">
                    <h3>Routing / Origin</h3>
                    <form [formGroup]="originForm">
                      <div class="form-row">
                        <div class="form-group col-md-4">
                          <label for="inputAddress" class="col-form-label">Location Type</label>
                          <select class="form-control" formControlName="locationtypeId">
                            <option *ngFor="let item of locationTypes" [ngValue]="item.id">{{item.name}}</option>
                          </select>
                        </div>


                        <div class="form-group col-md-4">
                          <label for="inputAddress" class="col-form-label">Pickup Date</label>
                          <input class="form-control" type="date" formControlName="pickupDate">
                        </div>
                        <div class="form-group col-md-4">
                          <label for="inputAddress" class="col-form-label">Cargo Ready Date</label>
                          <input class="form-control" type="date" formControlName="readyDate">
                        </div>
                        <div class="form-group col-md-12" *ngIf="totalBookingForm.shipmentmodeId==1">
                          <label for="inputAddress" class="col-form-label">Airport of loading</label>
                          <ngx-select [items]="displayPorts" optionTextField="name" optionValueField="id"
                            formControlName="airportId" (typed)="searchList($event)" [keepSelectedItems]="true"
                            (select)="onItemSelection()" placeholder="Minimum 3 characters"></ngx-select>

                          <!--                    <select class="form-control" formControlName="airportId">
                            <option *ngFor="let data of airports" [ngValue]="data.id">{{data.name}}</option>
                          </select> -->
                        </div>
                        <div class="form-group col-md-12" *ngIf="totalBookingForm.shipmentmodeId!=1">
                          <label for="inputAddress" class="col-form-label">Port of loading</label>
                          <ngx-select [items]="displayPorts" optionTextField="name" optionValueField="id"
                            formControlName="seaportId" (typed)="searchList($event)" placeholder="Minimum 5 characters"
                            [keepSelectedItems]="true" (select)="onItemSelection()"></ngx-select>

                          <!-- <select class="form-control" formControlName="seaportId">
                            <option *ngFor="let data of seaports" [ngValue]="data.id">{{data.name}}</option>
                          </select> -->
                        </div>
                      </div>
                      <div class="form-row">
                        <div class="form-group col-md-12">
                          <label for="inputCity" class="col-form-label">Pickup Location</label>
                          <ngx-select [items]="suggestions" formControlName="location" [keepSelectedItems]="true"
                            optionTextField="place_name" optionValueField="place_name"
                            (typed)="startMapSuggestions($event)"></ngx-select>
                          <!--                           <input type="text" class="form-control" id="inputCity" formControlName="location">
 -->
                        </div>
                        <!-- 
                        <div class="form-group col-md-6">
                          <label for="inputZip" class="col-form-label">Zip</label>
                          <input type="number" min="0" class="form-control" id="inputZip" formControlName="pincode">
                        </div> -->
                        <div class="form-group col-md-12">
                          <textarea class="form-control" placeholder="Instructions"
                            formControlName="address"></textarea>
                        </div>
                      </div>


                    </form>

                  </div> <!-- end card-body -->
                </div>
              </div>

              <div class="col-xl-6 box-margin height-card">
                <div class="card">
                  <div class="card-body">
                    <h3>Routing / Destination</h3>
                    <form [formGroup]="destinationForm">
                      <div class="form-row">
                        <div class="form-group col-md-6">
                          <label for="inputAddress" class="col-form-label">Location Type</label>
                          <select class="form-control" formControlName="locationtypeId">
                            <option *ngFor="let item of locationTypes" [ngValue]="item.id">{{item.name}}</option>
                          </select>
                        </div>



                        <div class="form-group col-md-12" *ngIf="totalBookingForm.shipmentmodeId==1">
                          <label for="inputAddress" class="col-form-label">Airport of destination</label>
                          <ngx-select [items]="displayPorts" optionTextField="name" optionValueField="id"
                            formControlName="airportId" (typed)="searchList($event)" [keepSelectedItems]="true"
                            (select)="onItemSelection()" placeholder="Minimum 3 characters"></ngx-select>

                        </div>
                        <div class="form-group col-md-12" *ngIf="totalBookingForm.shipmentmodeId!=1">
                          <label for="inputAddress" class="col-form-label">Port of destination</label>
                          <ngx-select [items]="displayPorts" optionTextField="name" optionValueField="id"
                            formControlName="seaportId" (typed)="searchList($event)" [keepSelectedItems]="true"
                            placeholder="Minimum 5 characters" (select)="onItemSelection()"></ngx-select>

                        </div>
                      </div>
                      <div class="form-row">
                        <div class="form-group col-md-12">
                          <label for="inputCity" class="col-form-label">Drop Location</label>
                          <ngx-select [items]="suggestions" formControlName="location" [keepSelectedItems]="true"
                            optionTextField="place_name" optionValueField="place_name"
                            (typed)="startMapSuggestions($event)"></ngx-select>

                          <!-- <input type="text" class="form-control" id="inputCity" 
 ngxTypeahead
 taApiMethod="post"
 taApi="http"
 taQueryParam="search"
 [taUrl]="url"
 [taParams]="params"
 (taSelected)="handleResultSelected(2,$event)"
 formControlName="location"> -->
                        </div>

                        <!--                         <div class="form-group col-md-6">
                          <label for="inputZip" class="col-form-label">Zip</label>
                          <input type="number" min="0" class="form-control" id="inputZip" formControlName="pincode">
                        </div> -->
                        <div class="form-group col-md-12">
                          <textarea class="form-control" placeholder="Instructions"
                            formControlName="address"></textarea>
                        </div>
                      </div>


                    </form>
                  </div> <!-- end card-body -->
                </div> <!-- end card-->
              </div> <!-- end col -->
              <div class="col-xl-12 box-margin height-card">
                <div class="card">
                  <div class="card-body">
                    <h3>Instructions</h3>

                    <div class="form-row">
                      <div class="form-group col-md-6">
                        <label for="cargoDesc" class="col-form-label">Instructions (INTERNAL)</label>
                        <textarea class="form-control" placeholder="INTERNAL"
                          [(ngModel)]="cargoExtrainfo.internalNote"></textarea>
                      </div>

                      <div class="form-group col-md-6">
                        <label for="cargoDesc" class="col-form-label">Instructions (EXTERNAL)</label>
                        <textarea class="form-control" placeholder="EXTERNAL"
                          [(ngModel)]="cargoExtrainfo.externalNote"></textarea>
                      </div>
                    </div>




                  </div> <!-- end card-body -->
                </div> <!-- end card-->
              </div> <!-- end col -->
              <div class="col-xl-12 box-margin height-card">
                <div class="card">
                  <div class="card-body">
                    <h3>Documents (Cargo Invoice / Packing List)</h3>
                    <form [formGroup]="fileUploadForm">
                      <file-upload formControlName="files" animation="true"
                        accept="application/pdf,application/vnd.ms-excel,image/*"></file-upload>
                      <button type="submit" class="btn btn-primary" (click)="uploadFileImpl()">Upload files</button>

                    </form>
                    <div
                      *ngIf="(totalBookingForm.cargofiles && totalBookingForm.cargofiles.length>0) || (totalBookingForm.cargoFilesSources)">
                      <h4>Uploaded document(s)</h4>
                      <p *ngFor="let file of totalBookingForm.cargoFilesSources" class="mb-4">
                        {{file.fileName}} <a class="btn btn-primary float-right" [href]="file.src" target="_blank">
                          View</a>
                      </p>
                      <p *ngFor="let file of totalBookingForm.cargofiles">{{file}}</p>

                    </div>
                    <ng-container *ngIf="!bid || (bid && totalBookingForm.status!=2)">
                      <button type="submit" class="btn btn-primary float-right mr-3" (click)="saveBooking()">Save
                        booking</button>

                      <button type="submit" class="btn btn-primary float-right mr-3" (click)="openEmailComp()">Send
                        email & save booking</button>
                      <button type="submit" class="btn btn-primary float-right mr-3"
                        (click)="exportBookingPDF()">Download Confirmation PDF</button>
                      <button type="submit" class="btn btn-danger float-right mr-3" (click)="deleteConfirmation()"
                        *ngIf="user.role.id==1 && bid" [disabled]="!bid">Delete Job</button>
                    </ng-container>
                  </div>
                </div>
              </div>

            </div>
            <app-footer></app-footer>

          </div>
        </div>
      </div>